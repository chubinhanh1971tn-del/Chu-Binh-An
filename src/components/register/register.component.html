<app-header></app-header>
<div class="bg-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 min-h-screen">
  <div class="max-w-md w-full space-y-8">
    <div>
      <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
        Tạo tài khoản mới
      </h2>
      @if(groupFromInvite(); as groupName) {
        <p class="mt-2 text-center text-sm text-gray-600">
            Bạn đang được mời tham gia nhóm <strong class="font-semibold text-yellow-700">{{ groupName }}</strong>.
        </p>
      }
    </div>
    <form class="mt-8 space-y-6 bg-white p-8 shadow-lg rounded-lg" #registerForm="ngForm" (ngSubmit)="submitForm()">
      <div class="rounded-md shadow-sm space-y-4">
        <div>
            <label for="reg-fullName" class="block text-sm font-medium text-gray-700 mb-1">Họ và tên *</label>
            <input type="text" name="fullName" id="reg-fullName" required [(ngModel)]="registerData.name" #fullName="ngModel" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500">
        </div>
        <div>
          <label for="reg-email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
          <input type="email" name="email" id="reg-email" required email [(ngModel)]="registerData.email" #email="ngModel" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500">
        </div>
        <div>
          <label for="reg-password" class="block text-sm font-medium text-gray-700 mb-1">Mật khẩu *</label>
          <input type="password" name="password" id="reg-password" required minlength="6" [(ngModel)]="registerData.password" #password="ngModel" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500">
        </div>
        <div>
            <label for="reg-confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Xác nhận mật khẩu *</label>
            <input type="password" name="confirmPassword" id="reg-confirmPassword" required [(ngModel)]="registerData.confirmPassword" #confirmPassword="ngModel" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500">
            @if (password.value !== confirmPassword.value && confirmPassword.touched) {
              <p class="text-red-500 text-xs mt-1">Mật khẩu xác nhận không khớp.</p>
            }
        </div>
      </div>

      @if (successMessage()) {
        <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
          <p class="font-bold">Thành công!</p>
          <p>{{ successMessage() }}</p>
        </div>
      }

      @if (errorMessage()) {
        <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
          <p class="font-bold">Lỗi</p>
          <p>{{ errorMessage() }}</p>
        </div>
      }

      <div class="flex items-center justify-between">
        <div class="text-sm">
          <a routerLink="/login" class="font-medium text-yellow-600 hover:text-yellow-500">
            Đã có tài khoản? Đăng nhập
          </a>
        </div>
      </div>

      <div>
        <button type="submit" [disabled]="!registerForm.form.valid || password.value !== confirmPassword.value"
                class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:bg-gray-400">
          Đăng ký
        </button>
      </div>
    </form>
  </div>
</div>
<app-footer></app-footer>